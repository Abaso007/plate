---
title: 手动安装
description: 在不依赖 UI 组件库的情况下，在你的 React 项目中安装和配置 Plate。
---

本指南将带你从零开始设置 Plate，赋予你对样式和组件渲染的完全控制。如果你没有使用如 shadcn/ui 或 Tailwind CSS 这样的 UI 库，这种方式非常理想。

<Steps>

### 创建项目

<Callout type="info">
本指南以 **Vite** 为例演示初始项目设置。Plate 是与框架无关的，也可以无缝集成到 Next.js 或 Remix 等其他 React 环境。你可以将通用的设置原则应用到你选择的框架中。
</Callout>

首先，使用 Vite 创建一个新项目，并选择 **React + TypeScript** 模板：

```bash
npm create vite@latest
```

### 安装核心依赖

首先安装必要的 Plate 包。这些包提供了核心编辑器功能、React 集成以及基础的 marks 和 elements 插件。

```bash
npm add platejs @platejs/basic-nodes
```

-   `platejs`：Plate 核心引擎和 React 组件。
-   `@platejs/basic-nodes`：基础节点插件，如标题、粗体、斜体、下划线等。

### TypeScript 配置

Plate 提供 ESM 包。如果你使用 TypeScript，请确保你的 `tsconfig.json` 配置正确。Plate 推荐使用 TypeScript 5.0+ 并设置 `"moduleResolution": "bundler"`：

```jsonc
// tsconfig.json
{
  "compilerOptions": {
    // ... 其他选项
    "module": "esnext", // 如果你的环境需要并能处理 ESM 互操作，也可以用 commonjs
    "moduleResolution": "bundler",
    // ... 其他选项
  },
}
```

<Callout type="info">
  如果你无法使用 `"moduleResolution": "bundler"` 或 TypeScript 版本较旧，请参阅我们的[完整 TypeScript 指南](/docs/typescript)，了解使用路径别名的替代配置。
</Callout>

### 创建你的第一个编辑器

首先创建一个基础编辑器组件。以下示例设置了一个简单的编辑器。

```tsx title="src/App.tsx"
import React from 'react';
import type { Value } from 'platejs';
import { Plate, PlateContent, usePlateEditor } from 'platejs/react';

export default function App() {
  const editor = usePlateEditor();

  return (
    <Plate editor={editor}>
      <PlateContent 
        style={{ padding: '16px 64px', minHeight: '100px' }}
        placeholder="Type your amazing content here..."
      />
    </Plate>
  );
}
```

<Callout type="info">
  `usePlateEditor` 会创建一个 memoized 的编辑器实例，确保多次渲染时的稳定性。如果你需要非 memoized 版本，可以用 `platejs/react` 的 `createPlateEditor`。
</Callout>

<ComponentPreview name="installation-next-01-editor-demo" height="200px" />

此时，你已经拥有了一个可以显示和编辑纯文本的基础编辑器。

### 添加基础 Marks

让我们为加粗、斜体、下划线等基础文本格式添加支持。

```tsx showLineNumbers title="src/App.tsx" {4-8,32}
import React from 'react';
import type { Value } from 'platejs';

import {
  BoldPlugin,
  ItalicPlugin,
  UnderlinePlugin,
} from '@platejs/basic-nodes/react';
import {
  Plate,
  PlateContent,
  usePlateEditor,
} from 'platejs/react';

const initialValue: Value = [
  {
    type: 'p',
    children: [
      { text: 'Hello! Try out the ' },
      { text: 'bold', bold: true },
      { text: ', ' },
      { text: 'italic', italic: true },
      { text: ', and ' },
      { text: 'underline', underline: true },
      { text: ' formatting.' },
    ],
  },
];

export default function App() {
  const editor = usePlateEditor({
    plugins: [BoldPlugin, ItalicPlugin, UnderlinePlugin],
    value: initialValue,
  });

  return (
    <Plate editor={editor}>
      {/* 通常你会在这里添加工具栏以切换 marks */}
      <PlateContent style={{ padding: '16px 64px', minHeight: '100px' }} />
    </Plate>
  );
}
```

<Callout type="info" title="默认组件">
  像 `BoldPlugin`、`ItalicPlugin` 和 `UnderlinePlugin` 这样的 mark 插件自带默认组件，分别渲染为 `<strong>`、`<em>` 和 `<u>` element。除非你想自定义外观，否则无需注册自定义组件。
</Callout>

<ComponentPreview name="installation-next-02-marks-demo" height="200px" />

你需要实现自己的工具栏来应用这些 marks。例如，切换加粗：`editor.tf.bold.toggle()`。

### 添加基础 Elements

现在，让我们为标题和引用等块级 element 添加支持。

```tsx showLineNumbers title="src/App.tsx" {5,7-9,76-79}
import React from 'react';
import type { Value } from 'platejs';

import {
  BlockquotePlugin,
  BoldPlugin,
  H1Plugin,
  H2Plugin,
  H3Plugin,
  ItalicPlugin,
  UnderlinePlugin,
} from '@platejs/basic-nodes/react';
import {
  Plate,
  PlateContent,
  PlateElement,
  usePlateEditor,
  type PlateElementProps,
} from 'platejs/react';

const initialValue: Value = [
  {
    children: [{ text: 'Title' }],
    type: 'h3',
  },
  {
    children: [{ text: 'This is a quote.' }],
    type: 'blockquote',
  },
  {
    children: [
      { text: 'With some ' },
      { bold: true, text: 'bold' },
      { text: ' text for emphasis!' },
    ],
    type: 'p',
  },
];

// 定义 element 组件
function H1Element(props: PlateElementProps) {
  return <PlateElement as="h1" {...props} />;
}

function H2Element(props: PlateElementProps) {
  return <PlateElement as="h2" {...props} />;
}

function H3Element(props: PlateElementProps) {
  return <PlateElement as="h3" {...props} />;
}

function BlockquoteElement(props: PlateElementProps) {
  return (
    <PlateElement
      as="blockquote"
      style={{
        borderLeft: '2px solid #eee',
        marginLeft: 0,
        marginRight: 0,
        paddingLeft: '24px',
        color: '#666',
        fontStyle: 'italic',
      }}
      {...props}
    />
  );
}

export default function App() {
  const editor = usePlateEditor({
    plugins: [
      BoldPlugin,
      ItalicPlugin,
      UnderlinePlugin,
      H1Plugin.withComponent(H1Element),
      H2Plugin.withComponent(H2Element),
      H3Plugin.withComponent(H3Element),
      BlockquotePlugin.withComponent(BlockquoteElement),
    ],
    value: initialValue,
  });

  return (
    <Plate editor={editor}>
      {/* 通常你会在这里添加工具栏以切换 element 和 marks */}
      <PlateContent style={{ padding: '16px 64px', minHeight: '100px' }} />
    </Plate>
  );
}
```

<Callout type="note">
  注意我们如何使用 `Plugin.withComponent(Component)` 将组件注册到标题和引用等块级 element 插件。当你需要自定义样式或行为时，这是将 React 组件与 Plate 插件关联的推荐方法。
</Callout>

<ComponentPreview name="installation-next-03-elements-demo" height="200px" />

### 管理编辑器内容

为了让编辑器内容持久化，我们可以集成状态管理，实现内容的保存和加载。

```tsx showLineNumbers title="src/App.tsx" {81-87,93-95}
import React from 'react';
import type { Value } from 'platejs';

import {
  BlockquotePlugin,
  BoldPlugin,
  H1Plugin,
  H2Plugin,
  H3Plugin,
  ItalicPlugin,
  UnderlinePlugin,
} from '@platejs/basic-nodes/react';
import {
  Plate,
  PlateContent,
  PlateElement,
  usePlateEditor,
  type PlateElementProps,
} from 'platejs/react';

const initialValue: Value = [
  {
    children: [{ text: 'Title' }],
    type: 'h3',
  },
  {
    children: [{ text: 'This is a quote.' }],
    type: 'blockquote',
  },
  {
    children: [
      { text: 'With some ' },
      { bold: true, text: 'bold' },
      { text: ' text for emphasis!' },
    ],
    type: 'p',
  },
];

// 定义 element 组件
function H1Element(props: PlateElementProps) {
  return <PlateElement as="h1" {...props} />;
}

function H2Element(props: PlateElementProps) {
  return <PlateElement as="h2" {...props} />;
}

function H3Element(props: PlateElementProps) {
  return <PlateElement as="h3" {...props} />;
}

function BlockquoteElement(props: PlateElementProps) {
  return (
    <PlateElement
      as="blockquote"
      style={{
        borderLeft: '2px solid #eee',
        marginLeft: 0,
        marginRight: 0,
        paddingLeft: '24px',
        color: '#666',
        fontStyle: 'italic',
      }}
      {...props}
    />
  );
}

export default function App() {
  const editor = usePlateEditor({
    plugins: [
      BoldPlugin,
      ItalicPlugin,
      UnderlinePlugin,
      H1Plugin.withComponent(H1Element),
      H2Plugin.withComponent(H2Element),
      H3Plugin.withComponent(H3Element),
      BlockquotePlugin.withComponent(BlockquoteElement),
    ],
    value: () => {
      const savedValue = localStorage.getItem('plate-manual-demo');
      if (savedValue) {
        return JSON.parse(savedValue);
      }
      return initialValue;
    },
  });

  return (
    <Plate
      editor={editor}
      onChange={({ value }) => {
        localStorage.setItem('plate-manual-demo', JSON.stringify(value));
      }}
    >
      {/* 工具栏在这里 */}
      <div style={{ padding: '8px 0' }}>
        <button
          onClick={() => editor.tf.setValue(initialValue)}
          style={{
            padding: '4px 8px',
            margin: '0 4px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            cursor: 'pointer',
          }}
        >
          Reset
        </button>
      </div>
      <PlateContent
        style={{
          padding: '16px 64px',
          minHeight: '100px',
          border: '1px solid #eee',
          borderRadius: '4px',
        }}
        placeholder="Type your amazing content here..."
      />
    </Plate>
  );
}
```

<Callout type="info" title="内容管理">
  上述示例演示了管理编辑器内容的基本模式：
  - 初始内容通过 `usePlateEditor` 的 `value` 选项设置
  - 变更可通过 `<Plate>` 的 `onChange` 属性处理
  - 重置按钮通过 `editor.tf.setValue()` 恢复初始内容
  - 如需受控内容，请参阅 [受控内容](/docs/controlled)
</Callout>

<ComponentPreview name="installation-next-demo" />

### 下一步

你已经手动搭建了一个基础的 Plate 编辑器！接下来你可以：

*   **添加样式：**
    *   想要快速体验预设组件，可考虑使用 [Plate UI](/docs/installation/plate-ui)
    *   或继续用 CSS、CSS-in-JS 库或你喜欢的样式方案手动美化
*   **[添加插件](/docs/plugins)：** Plate 拥有丰富的插件生态，支持表格、提及、图片、列表等功能。安装相应包（如 `@platejs/table`），并添加到 `plugins` 数组。
*   **[构建工具栏](/docs/toolbar)：** 创建 React 组件作为工具栏按钮，利用 [Editor Transforms](/docs/transforms) 应用格式（如 `editor.tf.bold.toggle()`、`editor.tf.h1.toggle()`）。你也可以通过 [Editor API](/docs/api) 获取编辑器状态。
*   **了解更多：**
    *   [编辑器配置](/docs/editor)
    *   [插件配置](/docs/plugin)
    *   [插件组件](/docs/plugin-components)

</Steps> 