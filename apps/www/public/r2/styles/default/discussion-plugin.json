{
  "$schema": "https://platejs.org/schema/registry-item.json",
  "name": "discussion-plugin",
  "type": "registry:component",
  "author": "udecode (https://platejs.org)",
  "dependencies": [],
  "registryDependencies": ["https://platejs.org/r/block-discussion.json"],
  "files": [
    {
      "path": "components/editor/plugins/discussion-plugin.tsx",
      "content": "'use client';\n\nimport type { TComment } from '@/components/plate-ui/comment';\n\nimport { createPlatePlugin } from '@udecode/plate/react';\n\nimport { BlockDiscussion } from '@/components/plate-ui/block-discussion';\n\nexport interface TDiscussion {\n  id: string;\n  comments: TComment[];\n  createdAt: Date;\n  isResolved: boolean;\n  userId: string;\n  documentContent?: string;\n}\n\nconst discussionsData: TDiscussion[] = [\n  {\n    id: 'discussion1',\n    comments: [\n      {\n        id: 'comment1',\n        contentRich: [\n          {\n            children: [\n              {\n                text: 'This is a comment',\n              },\n            ],\n            type: 'p',\n          },\n        ],\n        createdAt: new Date(Date.now() - 900_000),\n        discussionId: 'discussion1',\n        isEdited: false,\n        userId: 'alice',\n      },\n    ],\n    createdAt: new Date(),\n    documentContent: 'comments to your content',\n    isResolved: false,\n    userId: 'alice',\n  },\n  {\n    id: 'discussion2',\n    comments: [\n      {\n        id: 'comment1',\n        contentRich: [\n          {\n            children: [\n              {\n                text: 'Hey, what do you think about this approach?',\n              },\n            ],\n            type: 'p',\n          },\n        ],\n        createdAt: new Date(Date.now() - 900_000),\n        discussionId: 'discussion1',\n        isEdited: false,\n        userId: 'alice',\n      },\n      {\n        id: 'comment2',\n        contentRich: [\n          {\n            children: [\n              {\n                text: 'Looks good!',\n              },\n            ],\n            type: 'p',\n          },\n        ],\n        createdAt: new Date(Date.now() - 800_000),\n        discussionId: 'discussion1',\n        isEdited: false,\n        userId: 'bob',\n      },\n      {\n        id: 'comment3',\n        contentRich: [\n          {\n            children: [\n              {\n                text: 'Thanks for the feedback!',\n              },\n            ],\n            type: 'p',\n          },\n        ],\n        createdAt: new Date(Date.now() - 700_000),\n        discussionId: 'discussion1',\n        isEdited: false,\n        userId: 'alice',\n      },\n    ],\n    createdAt: new Date(),\n    documentContent: 'collaborate',\n    isResolved: false,\n    userId: 'bob',\n  },\n  {\n    id: 'discussion4',\n    comments: [\n      {\n        id: 'comment1',\n        contentRich: [\n          {\n            children: [\n              {\n                text: 'Comments are a great way to provide feedback and discuss changes.',\n              },\n            ],\n            type: 'p',\n          },\n        ],\n        createdAt: new Date(Date.now() - 600_000),\n        discussionId: 'discussion4',\n        isEdited: false,\n        userId: 'charlie',\n      },\n      {\n        id: 'comment2',\n        contentRich: [\n          {\n            children: [\n              {\n                text: 'Agreed! The link to the docs makes it easy to learn more.',\n              },\n            ],\n            type: 'p',\n          },\n        ],\n        createdAt: new Date(Date.now() - 500_000),\n        discussionId: 'discussion4',\n        isEdited: false,\n        userId: 'bob',\n      },\n    ],\n    createdAt: new Date(),\n    documentContent: 'comments',\n    isResolved: false,\n    userId: 'charlie',\n  },\n  {\n    id: 'discussion5',\n    comments: [\n      {\n        id: 'comment1',\n        contentRich: [\n          {\n            children: [\n              {\n                text: 'This is a good example of how to use comments.',\n              },\n            ],\n            type: 'p',\n          },\n        ],\n        createdAt: new Date(Date.now() - 400_000),\n        discussionId: 'discussion5',\n        isEdited: false,\n        userId: 'alice',\n      },\n    ],\n    createdAt: new Date(),\n    documentContent: 'comments on many text segments',\n    isResolved: false,\n    userId: 'alice',\n  },\n  {\n    id: 'discussion6',\n    comments: [\n      {\n        id: 'comment1',\n        contentRich: [\n          {\n            children: [\n              {\n                text: 'Nice demonstration of overlapping annotations with both comments and suggestions!',\n              },\n            ],\n            type: 'p',\n          },\n        ],\n        createdAt: new Date(Date.now() - 300_000),\n        discussionId: 'discussion6',\n        isEdited: false,\n        userId: 'bob',\n      },\n      {\n        id: 'comment2',\n        contentRich: [\n          {\n            children: [\n              {\n                text: 'This helps users understand how powerful the editor can be.',\n              },\n            ],\n            type: 'p',\n          },\n        ],\n        createdAt: new Date(Date.now() - 200_000),\n        discussionId: 'discussion6',\n        isEdited: false,\n        userId: 'charlie',\n      },\n    ],\n    createdAt: new Date(),\n    documentContent: 'overlapping',\n    isResolved: false,\n    userId: 'bob',\n  },\n];\n\nconst avatarUrl = (seed: string) =>\n  `https://api.dicebear.com/9.x/glass/svg?seed=${seed}`;\n\nconst usersData: Record<\n  string,\n  { id: string; avatarUrl: string; name: string; hue?: number }\n> = {\n  alice: {\n    id: 'alice',\n    avatarUrl: avatarUrl('alice6'),\n    name: 'Alice',\n  },\n  bob: {\n    id: 'bob',\n    avatarUrl: avatarUrl('bob4'),\n    name: 'Bob',\n  },\n  charlie: {\n    id: 'charlie',\n    avatarUrl: avatarUrl('charlie2'),\n    name: 'Charlie',\n  },\n};\n\n// This plugin is purely UI. It's only used to store the discussions and users data\nexport const discussionPlugin = createPlatePlugin({\n  key: 'discussion',\n  options: {\n    currentUserId: 'alice',\n    discussions: discussionsData,\n    users: usersData,\n  },\n})\n  .configure({\n    render: { aboveNodes: BlockDiscussion },\n  })\n  .extendSelectors(({ getOption }) => ({\n    currentUser: () => getOption('users')[getOption('currentUserId')],\n    user: (id: string) => getOption('users')[id],\n  }));\n",
      "type": "registry:component",
      "target": "components/editor/plugins/discussion-plugin.tsx"
    }
  ]
}
