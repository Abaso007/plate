---
title: Comments
docs:
  - route: /docs/components/comment-leaf
    title: Comment Leaf
  - route: /docs/components/comment-toolbar-button
    title: Comment Toolbar Button
  - route: /docs/components/comments-popover
    title: Comments Popover
---

<ComponentPreview name="comments-demo" />

<PackageInfo>

## Features

- Add text comments as marks.
- Comments can include explanations, suggestions, questions, notes, or ideas for content improvement.
- Add a comment by selecting the text and using the comment button or hotkey **`Cmd+Shift+M`**.

</PackageInfo>

## Installation

```bash
npm install @udecode/plate-comments
```

## Usage

```tsx
import { CommentsPlugin } from '@udecode/plate-comments/react';

const editor = createPlateEditor({
  plugins: [
    // ...otherPlugins,
    CommentsPlugin,
  ],
});
```

## Keyboard Shortcuts

<KeyTable>
  <KeyTableItem hotkey="Cmd + Shift + M">
    Add a comment on the selected text.
  </KeyTableItem>
</KeyTable>

## Plugins

### `CommentsPlugin`

<API name="CommentsPlugin">
<APIOptions>
  <APIItem name="newText" type="string">
    The text for a new comment.
  </APIItem>
  <APIItem name="myUser" type="CommentUser">
    The current user's information.
  </APIItem>
  <APIItem name="userById" type="(id: string) => CommentUser">
    Function to get a user by their ID.
  </APIItem>
  <APIItem name="commentById" type="(id: string) => TComment">
    Function to get a comment by its ID.
  </APIItem>
  <APIItem name="activeComment" type="TComment">
    The currently active comment.
  </APIItem>
</APIOptions>
</API>

## Transforms

### `editor.tf.insert.comment`

Insert a new comment mark.

### `editor.api.comment.updateComment`

Updates an existing comment.

### `editor.api.comment.addRawComment`

Adds a new raw comment.

### `editor.api.comment.addComment`

Adds a new comment.

### `editor.api.comment.removeComment`

Removes a comment.

### `editor.api.comment.resetNewCommentValue`

Resets the value of a new comment.

## Store State

### `CommentStoreState`

<API name="CommentStoreState">
<APIState>
  <APIItem name="id" type="string">
    The unique ID of the comment.
  </APIItem>
  <APIItem name="isMenuOpen" type="boolean">
    Whether the menu associated with this comment is open.
  </APIItem>
  <APIItem name="editingValue" type="Value | null">
    The value currently being edited, or null if no editing in progress.
  </APIItem>
</APIState>
</API>

## Utils

### `findCommentNode`

<API name="findCommentNode">
<APIParameters>
  <APIItem name="editor" type="PlateEditor">
    The editor instance.
  </APIItem>
  <APIItem name="options" type="EditorNodesOptions" optional>
    Additional options for finding the node.
  </APIItem>
</APIParameters>
</API>

### `findCommentNodeById`

<API name="findCommentNodeById">
<APIParameters>
  <APIItem name="editor" type="PlateEditor">
    The editor instance.
  </APIItem>
  <APIItem name="id" type="string">
    The ID of the comment node to find.
  </APIItem>
</APIParameters>
</API>

### `getCommentCount`

<API name="getCommentCount">
<APIParameters>
  <APIItem name="node" type="TCommentText">
    The comment node.
  </APIItem>
</APIParameters>
</API>

### `getCommentKey`

<API name="getCommentKey">
<APIParameters>
  <APIItem name="id" type="string">
    The ID of the comment.
  </APIItem>
</APIParameters>
</API>

### `getCommentKeyId`

<API name="getCommentKeyId">
<APIParameters>
  <APIItem name="key" type="string">
    The comment key.
  </APIItem>
</APIParameters>
</API>

### `getCommentKeys`

<API name="getCommentKeys">
<APIParameters>
  <APIItem name="node" type="TCommentText">
    The node to check for comment keys.
  </APIItem>
</APIParameters>
</API>

### `getCommentNodeEntries`

<API name="getCommentNodeEntries">
<APIParameters>
  <APIItem name="editor" type="PlateEditor">
    The editor instance.
  </APIItem>
</APIParameters>
</API>

### `getCommentNodesById`

<API name="getCommentNodesById">
<APIParameters>
  <APIItem name="editor" type="PlateEditor">
    The editor instance.
  </APIItem>
  <APIItem name="id" type="string">
    The ID of the comment nodes to retrieve.
  </APIItem>
</APIParameters>
</API>

### `getCommentPosition`

<API name="getCommentPosition">
<APIParameters>
  <APIItem name="editor" type="PlateEditor">
    The editor instance.
  </APIItem>
  <APIItem name="node" type="TCommentText">
    The comment node for which to calculate the position.
  </APIItem>
</APIParameters>
</API>

### `getCommentUrl`

<API name="getCommentUrl">
<APIParameters>
  <APIItem name="commentId" type="string">
    The ID of the comment.
  </APIItem>
</APIParameters>
</API>

### `getElementAbsolutePosition`

<API name="getElementAbsolutePosition">
<APIParameters>
  <APIItem name="element" type="HTMLElement">
    The HTML element for which to calculate the absolute position.
  </APIItem>
</APIParameters>
</API>

### `isCommentKey`

<API name="isCommentKey">
<APIParameters>
  <APIItem name="key" type="string">
    The key to check.
  </APIItem>
</APIParameters>

<APIReturns type="boolean">
  Whether the key is a comment key.
</APIReturns>
</API>

### `isCommentNodeById`

<API name="isCommentNodeById">
<APIParameters>
  <APIItem name="node" type="TNode">
    The node to check.
  </APIItem>
  <APIItem name="id" type="string">
    The ID of the comment.
  </APIItem>
</APIParameters>

<APIReturns type="boolean">
  Whether the node is a comment with the specified ID.
</APIReturns>
</API>

### `isCommentText`

<API name="isCommentText">
<APIParameters>
  <APIItem name="node" type="TNode">
    The node to check.
  </APIItem>
</APIParameters>

<APIReturns type="boolean">
  Whether the node is a comment text node.
</APIReturns>
</API>

### `removeCommentMark`

<API name="removeCommentMark">
<APIParameters>
  <APIItem name="editor" type="PlateEditor">
    The editor instance.
  </APIItem>
</APIParameters>
</API>

### `unsetCommentNodesById`

<API name="unsetCommentNodesById">
<APIParameters>
  <APIItem name="editor" type="PlateEditor">
    The editor instance.
  </APIItem>
  <APIItem name="id" type="string">
    The ID of the comment nodes to unset.
  </APIItem>
</APIParameters>
</API>

## Components

### `<CommentProvider>`

<API name="CommentProvider">
<APIProps>
  <APIItem name="extends" type="CommentStoreState">
    Base state type.
  </APIItem>
  <APIItem name="scope" type="Scope" optional>
    The scope of the provider.
  </APIItem>
</APIProps>
</API>

### `<CommentDeleteButton>`

<API name="CommentDeleteButton">
<APIState>
  <APIItem name="activeCommentId" type="string">
    The ID of the active comment.
  </APIItem>
  <APIItem name="editor" type="PlateEditor">
    The editor instance.
  </APIItem>
  <APIItem name="id" type="string">
    The ID of the comment.
  </APIItem>
  <APIItem name="onCommentDelete" type="function">
    Callback when comment is deleted.
  </APIItem>
  <APIItem name="removeComment" type="function">
    Function to remove the comment.
  </APIItem>
  <APIItem name="setActiveCommentId" type="function">
    Function to set the active comment ID.
  </APIItem>
</APIState>
</API>

### `<CommentEditButton>`

<API name="CommentEditButton">
<APIState>
  <APIItem name="setIsMenuOpen" type="function">
    Function to set the menu open state.
  </APIItem>
  <APIItem name="comment" type="TComment">
    The comment object.
  </APIItem>
  <APIItem name="editingValue" type="function">
    Function to set the editing value.
  </APIItem>
</APIState>
</API>

### `<CommentEditCancelButton>`

Button component for canceling comment edits.

### `<CommentEditSaveButton>`

<API name="CommentEditSaveButton">
<APIState>
  <APIItem name="editingValue" type="Value">
    The current editing value.
  </APIItem>
  <APIItem name="setEditingValue" type="function">
    Function to set the editing value.
  </APIItem>
  <APIItem name="id" type="string">
    The ID of the comment.
  </APIItem>
  <APIItem name="onCommentUpdate" type="function">
    Callback when comment is updated.
  </APIItem>
  <APIItem name="updateComment" type="function">
    Function to update the comment.
  </APIItem>
  <APIItem name="value" type="string">
    The comment value.
  </APIItem>
</APIState>
</API>

### `<CommentEditTextarea>`

<API name="CommentEditTextarea">
<APIState>
  <APIItem name="setEditingValue" type="function">
    Function to set the editing value.
  </APIItem>
  <APIItem name="textareaRef" type="React.Ref">
    Reference to the textarea element.
  </APIItem>
  <APIItem name="value" type="string">
    The textarea value.
  </APIItem>
</APIState>
</API>

### `<CommentNewSubmitButton>`

<API name="CommentNewSubmitButton">
<APIState>
  <APIItem name="editingCommentText" type="string">
    The text being edited.
  </APIItem>
  <APIItem name="resetNewCommentValue" type="function">
    Function to reset the new comment value.
  </APIItem>
  <APIItem name="addComment" type="function">
    Function to add a comment.
  </APIItem>
  <APIItem name="isReplyComment" type="boolean">
    Whether this is a reply comment.
  </APIItem>
  <APIItem name="submitButtonText" type="string">
    Text for the submit button.
  </APIItem>
  <APIItem name="onCommentAdd" type="function">
    Callback when comment is added.
  </APIItem>
  <APIItem name="activeCommentId" type="string">
    The ID of the active comment.
  </APIItem>
  <APIItem name="comment" type="TComment">
    The comment object.
  </APIItem>
  <APIItem name="newValue" type="Value">
    The new comment value.
  </APIItem>
</APIState>
</API>

### `<CommentNewTextarea>`

<API name="CommentNewTextarea">
<APIState>
  <APIItem name="textareaRef" type="React.Ref">
    Reference to the textarea element.
  </APIItem>
  <APIItem name="placeholder" type="string">
    Placeholder text.
  </APIItem>
  <APIItem name="value" type="string">
    The textarea value.
  </APIItem>
  <APIItem name="setNewValue" type="function">
    Function to set the new value.
  </APIItem>
</APIState>
</API>

### `<CommentResolveButton>`

Button component for resolving/unresolving comments.

### `<CommentUserName>`

Component for displaying a comment user's name.

### `<CommentsPositioner>`

<API name="CommentsPositioner">
<APIState>
  <APIItem name="activeCommentId" type="string">
    The ID of the active comment.
  </APIItem>
  <APIItem name="position" type="object">
    Position coordinates (top and left).
  </APIItem>
</APIState>
</API>

## Hooks

### `useActiveCommentNode`

<API name="useActiveCommentNode">
<APIReturns type="TCommentText | null">
  The active comment node, or null if none found.
</APIReturns>
</API>

### `useCommentAddButton`

<API name="useCommentAddButton">
<APIReturns type="{ props: { onClick: () => void } }">
  Props for the comment add button.
</APIReturns>
</API>

### `useCommentItemContentState`

<API name="useCommentItemContentState">
<APIReturns type="object">
  <APIItem name="comment" type="TComment">
    The comment object.
  </APIItem>
  <APIItem name="isReplyComment" type="boolean">
    Whether this is a reply comment.
  </APIItem>
  <APIItem name="commentText" type="string">
    The comment text content.
  </APIItem>
  <APIItem name="user" type="CommentUser">
    The comment author.
  </APIItem>
  <APIItem name="myUserId" type="string">
    Current user's ID.
  </APIItem>
  <APIItem name="editingValue" type="Value">
    Current editing value.
  </APIItem>
  <APIItem name="isMyComment" type="boolean">
    Whether current user is the author.
  </APIItem>
</APIReturns>
</API>

### `useCommentLeaf`

<API name="useCommentLeaf">
<APIParameters>
  <APIItem name="setActiveCommentId" type="function">
    Function to set active comment ID.
  </APIItem>
  <APIItem name="lastCommentId" type="string">
    ID of the last comment in the leaf.
  </APIItem>
</APIParameters>

<APIReturns type="{ props: { onClick: () => void } }">
  Props for the comment leaf.
</APIReturns>
</API>

### `useCommentValue`

<API name="useCommentValue">
<APIReturns type="{ textareaRef: React.Ref }">
  Reference to the textarea element.
</APIReturns>
</API>

### `useCommentsResolved`

<API name="useCommentsResolved">
<APIReturns type="TComment[]">
  Array of resolved comments.
</APIReturns>
</API>

### `useCommentsShowResolvedButton`

<API name="useCommentsShowResolvedButton">
<APIReturns type="{ props: { pressed: boolean; onClick: () => void } }">
  Props for the show resolved comments button.
</APIReturns>
</API>