---
title: Block Selection
docs:
  - route: /docs/components/block-selection
    title: Block Selection
---

<ComponentPreview name="block-selection-demo" />

<PackageInfo>

The Block Selection feature allows users to select and manipulate entire text blocks, as opposed to individual words or characters. This powerful functionality enhances the editing experience by providing efficient ways to manage large sections of content.

## Features

- Select entire blocks with a single action
- Multi-block selection
- Copy, cut, and delete operations on selected blocks
- Keyboard shortcuts for quick selection:
  - `Cmd+A`:
    - First press: select the current block
    - Double press: select all blocks
  - Arrow keys: select the block above or below
- Customizable styling for selected blocks

</PackageInfo>

## Installation

```bash
npm install @udecode/plate-selection @udecode/plate-node-id
```

## Usage

```tsx
import { NodeIdPlugin } from '@udecode/plate-node-id';
import { BlockSelectionPlugin } from '@udecode/plate-selection/react';

const plugins = [
  // ...otherPlugins,
  NodeIdPlugin,
  BlockSelectionPlugin,
];
```

### Exclude blocks from selection

You can exclude certain plugins from block selection using:

```ts
BlockSelectionPlugin.configure({
  inject: {
    // Exclude blocks below table rows
    excludeBelowPlugins: ['tr'],
    // Exclude block types
    excludePlugins: ['table', 'code_line', 'column_group', 'column'],
  }
})
```

- `excludeBelowPlugins`: Plugin keys of non-selectable block descendants. Use this to prevent selection below specific blocks. For example, excluding 'tr' prevents selecting individual cells while still allowing table row selection.

- `excludePlugins`: Plugin keys of non-selectable blocks.

### Set scrollable container

If you're using `EditorContainer` from [Editor](/docs/components/editor), you can skip this section.

To control the scrollable container, configure the `boundaries` and `container` options within `areaOptions`. These options accept CSS selectors, such as `#selection-demo #${editor.uid}`, which are used with `document.querySelector()`.

For this to work effectively:

1. Add an `id` or `className` to your scroll container. If you're not sure about the container, you can add it to the `<Editor />` component. We recommend using `id={editor.uid}`.
2. Use the appropriate selector in your configuration.
3. Don't forget to set `position: relative` to the container.

Default configuration:

```js
BlockSelectionPlugin.configure({
  options: {
    areaOptions: {
      boundaries: `#${editor.uid}`,
      container: `#${editor.uid}`,
      selectables: `#${editor.uid} .slate-selectable`,
    },
  },
});
```

### Set scroll speed

Use `options.areaOptions.behaviour.scrolling.speedDivider` to set the scroll speed.

The value `0.8` is our recommended speed since it's near the browser-native speed.

```ts
BlockSelectionPlugin.configure({
  options: {
    areaOptions: {
      behaviour: {
        scrolling: {
          // You can slow down the scroll speed by setting a bigger value.
          speedDivider: 1.5,
        },
        // The distance needed to move for the selection area to appear.
        // If it's too small, it may cause the mouse click event to be blocked. 10 is a good default.
        startThreshold: 4,
      },
    },
  },
});
```

### Add selectable element

Add `data-plate-selectable="true"` to any element you want to start block selection.

### Prevent unselect

To prevent unselecting blocks when clicking on certain elements, add the `data-plate-prevent-unselect` attribute to those components

For example:
```tsx
<YourSpecialButtoon data-plate-prevent-unselect />
```

### Full Page Selection

#### Making Elements Selectable

You can enable block selection for elements outside the `<Editor />` component, similar to the [Potion](https://potion.platejs.org/) template. Add the `data-plate-selectable` attribute to any component you want to make selectable:

```tsx
<Cover data-plate-selectable />
<Sidebar data-plate-selectable />
```

This works for any element, even those outside the editor's DOM tree.

#### Resetting Selection

There are two ways to handle resetting selection across the full page:

1. Direct API call:
```tsx
editor.api.blockSelection.unselect();
```

2. Click outside handler:
```tsx
const handleClickOutside = (event: MouseEvent) => {
  if (!(event.target as HTMLElement).closest('[data-plate-selectable]')) {
    editor.api.blockSelection.unselect();
  }
};
```

## Styling

### Selection area

Style the selection area by adding the `.slate-selection-area` class to your editor container component. For example:

```js
'[&_.slate-selection-area]:border [&_.slate-selection-area]:border-primary [&_.slate-selection-area]:bg-primary/10'
```

### Selected element

To determine if an element is selected, use `useBlockSelected` hook. You can render a visual indicator around selected blocks using our [BlockSelection](/docs/components/block-selection) component or create your own.

This component should be rendered inside each block element for consistent selection feedback. Plate UI is doing it in [PlateElement](/docs/components/plate-element).

## Plugins

### `BlockSelectionPlugin`

<API name="BlockSelectionPlugin">
<APIOptions>
  <APIItem name="areaOptions" type="PartialSelectionOptions" optional>
    Options for the selection area.
  </APIItem>
  <APIItem name="editorPaddingRight" type="CSSProperties['width']" optional>
    Editor padding right.
  </APIItem>
  <APIItem name="excludeBelowPlugins" type="string[]" optional>
    Plugin keys of non-selectable block descendants.
  </APIItem>
  <APIItem name="excludePlugins" type="string[]" optional>
    Plugin keys of non-selectable blocks.
  </APIItem>
</APIOptions>
</API>

## API

### `editor.api.blockSelection.add`

<API name="add">
<APIParameters>
  <APIItem name="id" type="string">
    The ID of the block to add to selection.
  </APIItem>
  <APIItem name="options" type="object" optional>
    Options for adding the block.
  </APIItem>
</APIParameters>

<APIOptions type="object">
  <APIItem name="clear" type="boolean" optional>
    Whether to clear existing selections before adding the new one.
    - **Default:** `true`
  </APIItem>
</APIOptions>
</API>

### `editor.api.blockSelection.getNodes`

<API name="getNodes">
<APIReturns type="NodeEntry[]">
  Array of selected block entries.
</APIReturns>
</API>

### `editor.api.blockSelection.resetSelectedIds`

Reset the set of selected IDs to an empty set.

### `editor.api.blockSelection.selectedAll`

Select all selectable blocks in the editor.

### `editor.api.blockSelection.setSelectedIds`

<API name="setSelectedIds">
<APIParameters>
  <APIItem name="options" type="ChangedElements">
    Elements to add/remove from selection.
  </APIItem>
</APIParameters>

<APIOptions type="ChangedElements">
  <APIItem name="added" type="HTMLElement[]">
    Elements to add to selection.
  </APIItem>
  <APIItem name="removed" type="HTMLElement[]">
    Elements to remove from selection.
  </APIItem>
</APIOptions>
</API>

### `editor.api.blockSelection.unselect`

Unselect all blocks and set `isSelecting` to false.

## Transforms

### `editor.tf.blockSelection.duplicate`

Duplicate the selected blocks.

### `editor.tf.blockSelection.removeNodes`

Remove the selected nodes from the editor.

### `editor.tf.blockSelection.select`

Select the nodes returned by `getNodes()` and reset selected IDs.

### `editor.tf.blockSelection.setNodes`

<API name="setNodes">
<APIParameters>
  <APIItem name="props" type="Partial<NodeProps<TElement>>">
    Properties to set on selected nodes.
  </APIItem>
  <APIItem name="options" type="SetNodesOptions" optional>
    Options for setting nodes.
  </APIItem>
</APIParameters>
</API>

### `editor.tf.blockSelection.setTexts`

<API name="setTexts">
<APIParameters>
  <APIItem name="props" type="Partial<NodeProps<TText>>">
    Text properties to set on selected nodes.
  </APIItem>
  <APIItem name="options" type="Omit<SetNodesOptions, 'at'>" optional>
    Options for setting text nodes.
  </APIItem>
</APIParameters>
</API>

## Hooks

### `useBlockSelectable`

<API name="useBlockSelectable">
<APIReturns type="{ props: object }">
  <APIItem name="props" type="object">
    Props for the block element:
    - `className`: `'slate-selectable'`
    - `onContextMenu`: Handler for right-click menu
  </APIItem>
</APIReturns>
</API>

### `useBlockSelected`

<API name="useBlockSelected">
<APIReturns type="boolean">
  Whether the context block is selected.
</APIReturns>
</API>

### `useBlockSelectionNodes`

<API name="useBlockSelectionNodes">
<APIReturns type="NodeEntry[]">
  Array of selected block entries.
</APIReturns>
</API>

### `useBlockSelectionFragment`

<API name="useBlockSelectionFragment">
<APIReturns type="Node[]">
  Array of selected block nodes.
</APIReturns>
</API>

### `useBlockSelectionFragmentProp`

<API name="useBlockSelectionFragmentProp">
<APIReturns type="Node[]">
  Fragment prop for selected blocks.
</APIReturns>
</API>

### `useSelectionArea`

Initialize and manage selection area functionality.

### `editor.api.blockSelection.isSelectable`

<API name="isSelectable">
<APIParameters>
  <APIItem name="element" type="TElement">
    Block element to check.
  </APIItem>
  <APIItem name="path" type="Path">
    Path to the block element.
  </APIItem>
</APIParameters>

<APIReturns type="boolean">
  Whether the block is selectable.
</APIReturns>
</API>

### `editor.api.blockSelection.moveSelection`

<API name="moveSelection">
<APIParameters>
  <APIItem name="direction" type="'up' | 'down'">
    Direction to move selection.
  </APIItem>
</APIParameters>
</API>

### `editor.api.blockSelection.shiftSelection`

<API name="shiftSelection">
<APIParameters>
  <APIItem name="direction" type="'up' | 'down'">
    Direction to expand/shrink selection.
  </APIItem>
</APIParameters>
</API>
